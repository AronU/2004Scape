[debugproc,setup_sheep_herder]
if_close;
if (p_finduid(uid) = true) {
    inv_add(inv, coins, 5000);
    ~player_teleport_normal(0_40_51_55_37);
} else {
    @please_finish;
}

[debugproc,setup_waterfall_quest]
if_close;
if (p_finduid(uid) = true) {
    inv_add(inv, airrune, 6);
    inv_add(inv, firerune, 6);
    inv_add(inv, earthrune, 6);
    inv_add(inv, rope, 1);
    stat_advance(hitpoints, calc(50000 * 10));
    ~player_teleport_normal(0_39_54_30_40);
} else {
    @please_finish;
}

[debugproc,setup_druidic_ritual]
if_close;
if (p_finduid(uid) = true) {
    ~player_teleport_normal(0_45_54_44_27);
    inv_add(inv, raw_chicken, 1);
    inv_add(inv, raw_beef, 1);
    inv_add(inv, raw_rat_meat, 1);
    inv_add(inv, raw_bear_meat, 1);
} else {
    @please_finish;
}

[debugproc,setup_witches_house]
if_close;
if (p_finduid(uid) = true) {
    ~player_teleport_normal(0_45_53_50_60);
    inv_add(inv, cheese, 2);
    inv_add(inv, leather_gloves, 1);
} else {
    @please_finish;
}

[debugproc,setup_dwarf_cannon]
if_close;
if (p_finduid(uid) = true) {
    ~player_teleport_normal(0_40_54_12_7);
    stat_advance(agility, calc(10000 * 10));
    stat_advance(magic, calc(100000 * 10));
    inv_add(inv, airrune, 50);
    inv_add(inv, lawrune, 20);
    inv_add(inv, waterrune, 20);
} else {
    @please_finish;
}

[debugproc,setup_temple_of_ikov]
if_close;
if (p_finduid(uid) = true) {
    ~player_teleport_normal(0_40_51_18_56);
    stat_advance(ranged, calc(100000 * 10));
    stat_advance(thieving, calc(100000 * 10));
    inv_add(bank, knife, 5);
    inv_add(bank, limpwurt_root, 50);
    inv_add(bank, unlit_candle, 5);
    inv_add(bank, tinderbox, 5);
    inv_add(bank, rune_arrow, 500);
    mes("Please check your ::~bank");
} else {
    @please_finish;
}

//underground pass debug
[debugproc,testmaze]
if(p_finduid(uid) = true) ~setupassgrilltrap;

[debugproc,getmaze]
if(p_finduid(uid) = true) mes("<tostring(getbit_range(%ibanmulti, 22, 31))>");

//Hero's Quest
[debugproc,gang]
if_close;
if (p_finduid(uid) = true) {
    switch_int(~p_choice4("Join Phoenix", 1, "Join Blackarm", 2, "Tele Phoenix", 3, "Tele Blackarm", 4)) {
        case 1 :
            %phoenixgang = ^phoenixgang_complete;
            %blackarmgang = ^blackarmgang_not_started;
            mes("Joined Phoneix gang");
        case 2 :
            %phoenixgang = ^phoenixgang_not_started;
            %blackarmgang = ^blackarmgang_complete;
            mes("Joined Blackarm gang");
        case 3 :
            p_telejump(0_50_152_46_54);
        case 4 :
            p_telejump(0_49_52_49_58);
    }
} else {
    @please_finish;
}

[debugproc,hero]
if_close;
if (p_finduid(uid) = true) {
  switch_int(~p_choice4_header("Start Heros Quest", 1, "Teleports", 2, "Get Items", 3, "Complete Heros Quest", 4, "Hero progress: <tostring(%heroquest)>")) {
    case 1 :
      switch_int(~p_choice2_header("Phoenix", 1, "Blackarm", 2, "Choose a gang")) {
        case 1 :
          %blackarmgang = ^blackarmgang_not_started;
          %phoenixgang = ^phoenixgang_complete;
        case 2 :
          %blackarmgang = ^blackarmgang_complete;
          %phoenixgang = ^phoenixgang_not_started;
          inv_add(inv, black_platebody, 1);
          inv_add(inv, black_platelegs, 1);
          inv_add(inv, black_full_helm, 1);
      }
      inv_add(inv, harralandervial, 1);
      inv_add(inv, fishing_rod, 1);
      inv_add(inv, ice_gloves, 1);
      inv_add(inv, fishing_bait, 1);
      inv_add(inv, tinderbox, 1);
      inv_add(inv, logs, 1);
      %qp = 55;
      %heroquest = 0;
      ~send_quest_progress(questlist:hero, %heroquest, ^hero_complete);
      %dragonquest = ^dragon_complete;
      %zanaris = ^zanaris_complete;
      %arthur = ^arthur_complete;
      p_telejump(0_45_54_24_53);
      mes("Use ::hero further to teleport to quest locations or get required items.");
    case 2 :
      def_int $choice = -1;
      def_int $gang_teles;
      if (%phoenixgang >= ^phoenixgang_complete) {
        $gang_teles = -3;
      } else {
        $gang_teles = -2;
      }
      while ($choice < 0) {
        switch_int($choice) {
          case -1 :
            $choice = ~p_choice5_header("Hero Guild", 1, "Firebird", 2, "Gerrant (oily fishing rod)", 3, "Lava Eels", 4, "Next.", $gang_teles, "Teleports Page 1");
          case -2 :
            $choice = ~p_choice4_header("Blackarm Gang HQ", 5, "Brimhaven HQ", 8, "Brimhaven Mansion", 9, "Prev.", -1, "Teleports Page 2");
          case -3 :
            $choice = ~p_choice3_header("Phoenix Gang HQ", 6, "Brimhaven Restaurant", 7, "Prev.", -1, "Teleports Page 2");
        }
      }
      switch_int($choice) {
        case 1 : p_telejump(0_45_54_24_53);
        case 2 : p_telejump(0_44_52_28_55);
        case 3 : p_telejump(0_47_50_5_25);
        case 4 : p_telejump(0_45_152_12_40);
        case 5 : p_telejump(0_49_52_49_58);
        case 6 : p_telejump(0_50_152_46_54);
        case 7 : p_telejump(0_43_49_41_51);
        case 8 : p_telejump(0_43_49_58_34);
        case 9 : p_telejump(0_43_49_21_51);
      }
    case 3 :
      switch_int(~p_choice3_header("Black armor", 1, "Oily fishing rod stuff", 2, "Ice gloves", 3, "Choose item set")) {
        case 1 :
          inv_add(inv, black_platebody, 1);
          inv_add(inv, black_platelegs, 1);
          inv_add(inv, black_full_helm, 1);
        case 2 :
          inv_add(inv, harralandervial, 1);
          inv_add(inv, fishing_rod, 1);
          inv_add(inv, fishing_bait, 1);
          inv_add(inv, tinderbox, 1);
          inv_add(inv, logs, 1);
        case 3 :
          inv_add(inv, ice_gloves, 1);
      }
    case 4 :
      queue(hero_quest_complete, 0, 0);
  }
} else {
  @please_finish;
}

// Legend's Quest
[debugproc,lf]// legends fire
if (p_finduid(uid) = true) {
    p_telejump(0_43_145_32_51);
}

[debugproc,lgem]// legends gem puzzle
if (p_finduid(uid) = true) {
    p_telejump(0_43_145_12_16);
}

[debugproc,lb]// legends beach
if (p_finduid(uid) = true) {
    p_telejump(0_43_45_26_11);
}

[debugproc,lg]// legends guild
if (p_finduid(uid) = true) {
    p_telejump(0_42_52_40_38);
}

[debugproc,lw]// legends water
if (p_finduid(uid) = true) {
    p_telejump(0_44_45_23_36);
}

[debugproc,jf]// jungle forester
if (p_finduid(uid) = true) {
    p_telejump(^legends_gujuo_guide_coord);
}

[debugproc,lv]// viyeldi
if (p_finduid(uid) = true) {
    p_telejump(0_37_73_9_40);
}

// Fight Arena
[debugproc,c3a]
if(p_finduid(uid) = false) {
    return;
}
@arena_release_scorp;

[debugproc,c4a]
if(p_finduid(uid) = false) {
    return;
}
@arena_release_bouncer;

// Dragon Slayer
[debugproc,dragslay]
mes("Progress: <tostring(%dragonquest)>.");
mes("Planks: <tostring(%dragonquestvar)>.");
mes("Ned Hired: <tostring(%dragon_ned_hired)>.");
mes("Oracle: <tostring(%dragon_oracle)>.");
mes("Goblin: <tostring(%dragon_goblin)>.");
mes("Shield: <tostring(%dragon_shield)>.");
mes("Wall: <tostring(%dragon_wall)>.");

[debugproc,dragslaystart]
if_close;
if (p_finduid(uid) = true) {
    p_telejump(0_49_52_55_36);
    %qp = 32;
    %dragonquest = 0;
    %dragon_ned_hired = 0;
    %dragon_oracle = 0;
    %dragon_wall = 0;
    %dragon_shield = 0;
    %dragon_goblin = 0;
    %dragonquestvar = 0;
} else {
    @please_finish;
}

[debugproc,dragslaybank]
if_close;
if (p_finduid(uid) = true) {
    def_int $choice = ~p_choice2_header("Yes.", 1, "No.", 2, "This clears your bank. Continue?");
    if ($choice = 2) {
        return;
    }

    inv_clear(bank);

    // give gp
    inv_add(bank, coins, 1000000);

    // give runes
    inv_add(bank, airrune, 10000);
    inv_add(bank, firerune, 10000);
    inv_add(bank, waterrune, 10000);
    inv_add(bank, earthrune, 10000);
    inv_add(bank, lawrune, 10000);

    // give food
    inv_add(bank, lobster, 10000);
    inv_add(bank, 3dose1strength, 10000);

    // give armor
    inv_add(bank, rune_scimitar, 10000);
    inv_add(bank, rune_full_helm, 10000);
    inv_add(bank, rune_chainbody, 10000);
    inv_add(bank, rune_platelegs, 10000);
    inv_add(bank, rune_kiteshield, 10000);
    inv_add(bank, black_cape, 10000);
    inv_add(bank, amulet_of_strength, 10000);
    inv_add(bank, dragon_vambraces, 10000);
    inv_add(bank, leather_boots, 10000);

    // give quest items
    inv_add(bank, wizards_mind_bomb, 10000);
    inv_add(bank, bowl_unfired, 10000);
    inv_add(bank, lobster_pot, 10000);
    inv_add(bank, silk, 10000);
    inv_add(bank, woodplank, 10000);
    inv_add(bank, nails, 10000);
    inv_add(bank, hammer, 10000);
} else {
    @please_finish;
}

// Monks Friend
[debugproc,setup_monks_friend]
if_close;
if (p_finduid(uid) = true) {
  inv_add(inv, jug_water, 1);
  inv_add(inv, logs, 1);
  ~player_teleport_normal(0_40_50_46_22);
} else {
  @please_finish;
}


[debugproc,pp1] if (p_finduid(uid) = true) p_telejump(0_53_54_15_33);

[debugproc,pp2] if (p_finduid(uid) = true) p_telejump(0_50_54_22_16);

[debugproc,pp3] if (p_finduid(uid) = true) p_telejump(0_53_154_13_49);

[debugproc,pp4] if (p_finduid(uid) = true) p_telejump(0_53_154_13_37);


[debugproc,setpp](int $var)
if (p_finduid(uid) = true)
%priestperil = $var;
mes("Set Priest in Peril to: <tostring($var)>.");
~send_quest_progress(questlist:priestperil, %priestperil, ^priestperil_complete);

[debugproc,setppm](int $var)
if (p_finduid(uid) = true)
%priestperil_mausoleum = $var;
mes("Set Priest in Peril to: <tostring($var)>.");


[debugproc,getpp]
if (p_finduid(uid) = true)
mes("Priest in Peril is currently set to: <tostring(%priestperil)>.");


[debugproc,getppm]
if (p_finduid(uid) = true)
mes("PIPMausoleum is currently set to: <tostring(%priestperil_mausoleum)>.");

//Underground Pass
[debugproc,upr]
if (p_finduid(uid) = false) { return; }
%upass = ^upass_not_started;
%ibanmulti = 0;
~send_quest_progress(questlist:upass, %upass, ^upass_complete);
mes("Upass Reset.");

[debugproc,upu]
if (p_finduid(uid) = false) { return; }
%upass = calc(%upass + 1);
~send_quest_progress(questlist:upass, %upass, ^upass_complete);
mes("Upass increased to stage <tostring(%upass)>");

[debugproc,upd]
if (p_finduid(uid) = false) { return; }
%upass = calc(%upass - 1);
~send_quest_progress(questlist:upass, %upass, ^upass_complete);
mes("Upass decreased to stage <tostring(%upass)>");

[debugproc,upb](int $bit)
if (p_finduid(uid) = false) { return; }
switch_int ($bit) {
    case 0 :
        if (testbit(%ibanmulti, ^upass_started_bit) = ^true) {
            %ibanmulti = clearbit(%ibanmulti, ^upass_started_bit);
            mes("upass_started_bit bit cleared.");
        } else {
            %ibanmulti = setbit(%ibanmulti, ^upass_started_bit);
            mes("upass_started_bit bit set.");
        }
    case 1 :
        if (testbit(%ibanmulti, ^upass_spoken_koftik) = ^true) {
            %ibanmulti = clearbit(%ibanmulti, ^upass_spoken_koftik);
            mes("upass_spoken_koftik bit cleared.");
        } else {
            %ibanmulti = setbit(%ibanmulti, ^upass_spoken_koftik);
            mes("upass_spoken_koftik bit set.");
        }
    case 2 :
        if (testbit(%ibanmulti, ^upass_read_journal_of_randas) = ^true) {
            %ibanmulti = clearbit(%ibanmulti, ^upass_read_journal_of_randas);
            mes("upass_read_journal_of_randas bit cleared.");
        } else {
            %ibanmulti = setbit(%ibanmulti, ^upass_read_journal_of_randas);
            mes("upass_read_journal_of_randas bit set.");
        }
    case 3 :
        if (testbit(%ibanmulti, ^upass_read_well_inscription) = ^true) {
            %ibanmulti = clearbit(%ibanmulti, ^upass_read_well_inscription);
            mes("upass_read_well_inscription bit cleared.");
        } else {
            %ibanmulti = setbit(%ibanmulti, ^upass_read_well_inscription);
            mes("upass_read_well_inscription bit set.");
        }
    case 4 :
        if (testbit(%ibanmulti, ^upass_read_history) = ^true) {
            %ibanmulti = clearbit(%ibanmulti, ^upass_read_history);
            mes("upass_read_history bit cleared.");
        } else {
            %ibanmulti = setbit(%ibanmulti, ^upass_read_history);
            mes("upass_read_history bit set.");
        }
    case 5 :
        if (testbit(%ibanmulti, ^upass_koftik_gone_insane) = ^true) {
            %ibanmulti = clearbit(%ibanmulti, ^upass_koftik_gone_insane);
            mes("upass_koftik_gone_insane bit cleared.");
        } else {
            %ibanmulti = setbit(%ibanmulti, ^upass_koftik_gone_insane);
            mes("upass_koftik_gone_insane bit set.");
        }
    case 6 :
        %ibanmulti = clearbit(%ibanmulti, ^upass_blood_on_doll);
        %ibanmulti = clearbit(%ibanmulti, ^upass_dove_on_doll);
        %ibanmulti = clearbit(%ibanmulti, ^upass_ashes_on_doll);
        %ibanmulti = clearbit(%ibanmulti, ^upass_shadow_on_doll);
        mes("All upass doll bits cleared.");
    case 7 :
        %ibanmulti = setbit(%ibanmulti, ^upass_blood_on_doll);
        mes("upass_blood_on_doll bit set.");
    case 8 :
        %ibanmulti = setbit(%ibanmulti, ^upass_dove_on_doll);
        mes("upass_dove_on_doll bit set.");
    case 9 :
        %ibanmulti = setbit(%ibanmulti, ^upass_ashes_on_doll);
        mes("upass_ashes_on_doll bit set.");
    case 10 :
        %ibanmulti = setbit(%ibanmulti, ^upass_shadow_on_doll);
        mes("upass_shadow_on_doll bit set.");
}

//Watchtower Quest
[debugproc,wtu]
if (p_finduid(uid) = false) { return; }
%itwatchtower = calc(%itwatchtower + 1);
mes("Watchtower increased to <tostring(%itwatchtower)>");
~send_quest_progress(questlist:itwatchtower, %itwatchtower, ^itwatchtower_complete);

[debugproc,wtd]
if (p_finduid(uid) = false) { return; }
%itwatchtower = calc(%itwatchtower - 1);
mes("Watchtower decreased to <tostring(%itwatchtower)>");
~send_quest_progress(questlist:itwatchtower, %itwatchtower, ^itwatchtower_complete);

[debugproc,wtb](int $bit)
if (p_finduid(uid) = false) { return; }
switch_int ($bit) {
    case 0 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_spoken_og) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_spoken_og);
            mes("itwatchtower_spoken_og bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_spoken_og);
            mes("itwatchtower_spoken_og bit set.");
        }
    case 1 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_spoken_grew) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_spoken_grew);
            mes("itwatchtower_spoken_grew bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_spoken_grew);
            mes("itwatchtower_spoken_grew bit set.");
        }
    case 2 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_spoken_toban) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_spoken_toban);
            mes("itwatchtower_spoken_toban bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_spoken_toban);
            mes("itwatchtower_spoken_toban bit set.");
        }
    case 3 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_helped_og) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_helped_og);
            mes("itwatchtower_helped_og bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_helped_og);
            mes("itwatchtower_helped_og bit set.");
        }
    case 4 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_helped_grew) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_helped_grew);
            mes("itwatchtower_helped_grew bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_helped_grew);
            mes("itwatchtower_helped_grew bit set.");
        }
    case 5 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_helped_toban) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_helped_toban);
            mes("itwatchtower_helped_toban bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_helped_toban);
            mes("itwatchtower_helped_toban bit set.");
        }
    case 6 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_looking_relic) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_looking_relic);
            mes("itwatchtower_looking_relic bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_looking_relic);
            mes("itwatchtower_looking_relic bit set.");
        }
    case 7 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_learning_skavid) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_learning_skavid);
            mes("itwatchtower_learning_skavid bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_learning_skavid);
            mes("itwatchtower_learning_skavid bit set.");
        }
    case 8 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_learned_ig) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_learned_ig);
            mes("itwatchtower_learned_ig bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_learned_ig);
            mes("itwatchtower_learned_ig bit set.");
        }
    case 9 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_learned_ar) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_learned_ar);
            mes("itwatchtower_learned_ar bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_learned_ar);
            mes("itwatchtower_learned_ar bit set.");
        }
    case 10 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_learned_cur) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_learned_cur);
            mes("itwatchtower_learned_cur bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_learned_cur);
            mes("itwatchtower_learned_cur bit set.");
        }
    case 11 :
        if (testbit(%itwatchtower_bits, ^itwatchtower_learned_nod) = ^true) {
            %itwatchtower_bits = clearbit(%itwatchtower_bits, ^itwatchtower_learned_nod);
            mes("itwatchtower_learned_nod bit cleared.");
        } else {
            %itwatchtower_bits = setbit(%itwatchtower_bits, ^itwatchtower_learned_nod);
            mes("itwatchtower_learned_nod bit set.");
        }
    case 12 :
        def_int $kills = getbit_range(%itwatchtower_bits, ^itwatchtower_shaman_kills_lower, ^itwatchtower_shaman_kills_upper);
        if ($kills > 0) {
            $kills = calc($kills - 1);
            %itwatchtower_bits = setbit_range_toint(%itwatchtower_bits, $kills, ^itwatchtower_shaman_kills_lower, ^itwatchtower_shaman_kills_upper);
            mes("Decreased shaman kills to <tostring($kills)>");
        } else {
            $kills = 6;
            %itwatchtower_bits = setbit_range_toint(%itwatchtower_bits, $kills, ^itwatchtower_shaman_kills_lower, ^itwatchtower_shaman_kills_upper);
            mes("Reset shaman kills to 6");
        }
    case 13 :
        def_int $market = getbit_range(%itwatchtower_bits, ^itwatchtower_market_lower, ^itwatchtower_market_upper);
        if ($market = 1) {
            %itwatchtower_bits = setbit_range_toint(%itwatchtower_bits, 2, ^itwatchtower_market_lower, ^itwatchtower_market_upper);
            mes("itwatchtower_market bit set to 2.");
        } else if ($market = 0) {
            %itwatchtower_bits = setbit_range_toint(%itwatchtower_bits, 1, ^itwatchtower_market_lower, ^itwatchtower_market_upper);
            mes("itwatchtower_market bit set to 1.");
        } else {
            %itwatchtower_bits = setbit_range_toint(%itwatchtower_bits, 0, ^itwatchtower_market_lower, ^itwatchtower_market_upper);
            mes("itwatchtower_market bit set to 0.");
        }
}
